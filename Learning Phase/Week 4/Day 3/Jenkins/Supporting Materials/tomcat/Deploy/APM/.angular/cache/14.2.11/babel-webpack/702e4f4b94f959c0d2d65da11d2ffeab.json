{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"./product.service\";\nimport * as i2 from \"../shared/star.component\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nimport * as i5 from \"@angular/router\";\n\nfunction ProductListComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 11)(2, \"h4\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Filtered by: \", ctx_r0.listFilter, \"\");\n  }\n}\n\nfunction ProductListComponent_table_11_tr_18_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 19);\n  }\n\n  if (rf & 2) {\n    const product_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵstyleProp(\"width\", ctx_r5.imageWidth, \"px\")(\"margin\", ctx_r5.imageMargin, \"px\");\n    i0.ɵɵproperty(\"src\", product_r4.imageUrl, i0.ɵɵsanitizeUrl)(\"title\", product_r4.productName);\n  }\n}\n\nconst _c0 = function (a1) {\n  return [\"/products\", a1];\n};\n\nconst _c1 = function (a1) {\n  return [\"/products\", a1, \"edit\"];\n};\n\nfunction ProductListComponent_table_11_tr_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtemplate(2, ProductListComponent_table_11_tr_18_img_2_Template, 1, 6, \"img\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\")(4, \"a\", 16);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\");\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"td\");\n    i0.ɵɵelement(14, \"pm-star\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 18);\n    i0.ɵɵtext(17, \" Edit \");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const product_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.showImage && product_r4.imageUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(13, _c0, product_r4.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", product_r4.productName, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r4.productCode);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r4.releaseDate);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind4(12, 8, product_r4.price, \"USD\", \"symbol\", \"1.2-2\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"rating\", product_r4.starRating);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(15, _c1, product_r4.id));\n  }\n}\n\nfunction ProductListComponent_table_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"table\", 12)(1, \"thead\")(2, \"tr\")(3, \"th\")(4, \"button\", 13);\n    i0.ɵɵlistener(\"click\", function ProductListComponent_table_11_Template_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.toggleImage());\n    });\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Product\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Code\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"th\");\n    i0.ɵɵtext(11, \"Available\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"th\");\n    i0.ɵɵtext(13, \"Price\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"th\");\n    i0.ɵɵtext(15, \"5 Star Rating\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"th\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"tbody\");\n    i0.ɵɵtemplate(18, ProductListComponent_table_11_tr_18_Template, 18, 17, \"tr\", 14);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.showImage ? \"Hide\" : \"Show\", \" Image \");\n    i0.ɵɵadvance(13);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.filteredProducts);\n  }\n}\n\nfunction ProductListComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Error: \", ctx_r2.errorMessage, \"\\n\");\n  }\n}\n\nexport let ProductListComponent = /*#__PURE__*/(() => {\n  class ProductListComponent {\n    constructor(productService) {\n      this.productService = productService;\n      this.pageTitle = 'Product List';\n      this.imageWidth = 50;\n      this.imageMargin = 2;\n      this.showImage = false;\n      this.errorMessage = '';\n      this._listFilter = '';\n      this.filteredProducts = [];\n      this.products = [];\n    }\n\n    get listFilter() {\n      return this._listFilter;\n    }\n\n    set listFilter(value) {\n      this._listFilter = value;\n      this.filteredProducts = this.listFilter ? this.performFilter(this.listFilter) : this.products;\n    }\n\n    performFilter(filterBy) {\n      filterBy = filterBy.toLocaleLowerCase();\n      return this.products.filter(product => product.productName.toLocaleLowerCase().indexOf(filterBy) !== -1);\n    } // Checks both the product name and tags\n\n\n    performFilter2(filterBy) {\n      filterBy = filterBy.toLocaleLowerCase();\n      return this.products.filter(product => product.productName.toLocaleLowerCase().indexOf(filterBy) !== -1 || product.tags && product.tags.some(tag => tag.toLocaleLowerCase().indexOf(filterBy) !== -1));\n    }\n\n    toggleImage() {\n      this.showImage = !this.showImage;\n    }\n\n    ngOnInit() {\n      this.productService.getProducts().subscribe({\n        next: products => {\n          this.products = products;\n          this.filteredProducts = this.products;\n        },\n        error: err => this.errorMessage = err\n      });\n    }\n\n  }\n\n  ProductListComponent.ɵfac = function ProductListComponent_Factory(t) {\n    return new (t || ProductListComponent)(i0.ɵɵdirectiveInject(i1.ProductService));\n  };\n\n  ProductListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ProductListComponent,\n    selectors: [[\"ng-component\"]],\n    decls: 13,\n    vars: 5,\n    consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [1, \"row\"], [1, \"col-md-2\"], [1, \"col-md-4\"], [\"type\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"row\", 4, \"ngIf\"], [1, \"table-responsive\"], [\"class\", \"table mb-0\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"col-md-6\"], [1, \"table\", \"mb-0\"], [1, \"btn\", \"btn-outline-primary\", \"btn-sm\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [3, \"src\", \"title\", \"width\", \"margin\", 4, \"ngIf\"], [3, \"routerLink\"], [3, \"rating\"], [1, \"btn\", \"btn-outline-primary\", \"btn-sm\", 3, \"routerLink\"], [3, \"src\", \"title\"], [1, \"alert\", \"alert-danger\"]],\n    template: function ProductListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3)(5, \"div\", 4);\n        i0.ɵɵtext(6, \"Filter by:\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 5)(8, \"input\", 6);\n        i0.ɵɵlistener(\"ngModelChange\", function ProductListComponent_Template_input_ngModelChange_8_listener($event) {\n          return ctx.listFilter = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(9, ProductListComponent_div_9_Template, 4, 1, \"div\", 7);\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵtemplate(11, ProductListComponent_table_11_Template, 19, 2, \"table\", 9);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵtemplate(12, ProductListComponent_div_12_Template, 2, 1, \"div\", 10);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.pageTitle, \" \");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.listFilter);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.listFilter);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.products && ctx.products.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n      }\n    },\n    dependencies: [i2.StarComponent, i3.NgForOf, i3.NgIf, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgModel, i5.RouterLink, i5.RouterLinkWithHref, i3.CurrencyPipe],\n    styles: [\"thead[_ngcontent-%COMP%]{color:#337ab7}\"]\n  });\n  return ProductListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}